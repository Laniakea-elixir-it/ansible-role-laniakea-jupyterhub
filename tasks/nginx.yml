---

- name: Install nginx
  apt:
    name: nginx
    state: present

- name: Configure reverse proxy for JupyterHub
  template:
    dest: "{{ jupyterhub_nginx_sites_available }}"
    src: jupyterhub_nginx.j2
  notify: Restart nginx

- name: Enable JupyterHub in nginx
  file:
    src: "{{jupyterhub_nginx_sites_available }}"
    dest: "{{ nginx_conf_dir }}/sites-enabled/jupyterhub"
    state: link
  notify: Restart nginx
    